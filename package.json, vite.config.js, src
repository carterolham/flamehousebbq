import subprocess, os, shutil, textwrap, json

# Prepare project folder structure
project_root = "/mnt/data/flamehousebbq"
src_dir = os.path.join(project_root, "src")
pages_dir = os.path.join(src_dir, "pages")

os.makedirs(pages_dir, exist_ok=True)

# Define files and contents
files = {
    "package.json": textwrap.dedent("""\
    {
      "name": "flamehousebbq",
      "version": "1.0.0",
      "private": true,
      "scripts": {
        "dev": "vite",
        "build": "vite build",
        "preview": "vite preview"
      },
      "dependencies": {
        "react": "^18.2.0",
        "react-dom": "^18.2.0",
        "react-router-dom": "^6.14.1"
      },
      "devDependencies": {
        "vite": "^5.0.0",
        "tailwindcss": "^3.5.0",
        "postcss": "^8.4.21",
        "autoprefixer": "^10.4.14"
      }
    }
    """),
    "vite.config.js": "import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\nexport default defineConfig({\n  plugins: [react()],\n  server: { port: 5173 }\n})\n",
    "index.html": textwrap.dedent("""\
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Carter's Flamehouse</title>
      </head>
      <body class="bg-flamebg text-gray-100">
        <div id="root"></div>
        <script type="module" src="/src/main.jsx"></script>
      </body>
    </html>
    """),
    "tailwind.config.cjs": textwrap.dedent("""\
    /** @type {import('tailwindcss').Config} */
    export default {
      content: ['./index.html', './src/**/*.{js,jsx,ts,tsx}'],
      theme: {
        extend: {
          colors: {
            flamegold: '#D4AF37',
            flamebg: '#0a0a0a'
          },
          fontFamily: {
            serif: ['Georgia', 'serif']
          }
        }
      },
      plugins: [],
    }
    """),
    "postcss.config.cjs": "module.exports = { plugins: { tailwindcss: {}, autoprefixer: {}, }, }\n",
    "README.md": "# FlamehouseBBQ - Static Build\n\nThis is a pre-built static site for Carter's Flamehouse.\n",
    "src/main.jsx": textwrap.dedent("""\
    import React from 'react'
    import { createRoot } from 'react-dom/client'
    import { BrowserRouter } from 'react-router-dom'
    import App from './App'
    import './styles.css'

    createRoot(document.getElementById('root')).render(
      <BrowserRouter>
        <App />
      </BrowserRouter>
    )
    """),
    "src/styles.css": textwrap.dedent("""\
    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    body {
      @apply bg-flamebg text-gray-100;
    }
    .header-title {
      @apply text-flamegold font-serif text-3xl md:text-4xl;
    }
    .container {
      @apply max-w-4xl mx-auto px-4;
    }
    .nav-link {
      @apply text-flamegold hover:underline px-3;
    }
    .card {
      @apply bg-neutral-900/60 p-4 rounded-lg ring-1 ring-flamegold/20;
    }
    """),
    "src/App.jsx": textwrap.dedent("""\
    import React from 'react'
    import { Routes, Route, Link } from 'react-router-dom'
    import Home from './pages/Home'
    import About from './pages/About'
    import Menu from './pages/Menu'
    import Reservations from './pages/Reservations'
    import Contact from './pages/Contact'

    function Nav() {
      return (
        <nav className="container flex justify-between py-4">
          <h1 className="header-title">Flamehouse BBQ</h1>
          <div>
            <Link className="nav-link" to="/">Home</Link>
            <Link className="nav-link" to="/about">About</Link>
            <Link className="nav-link" to="/menu">Menu</Link>
            <Link className="nav-link" to="/reservations">Reservations</Link>
            <Link className="nav-link" to="/contact">Contact</Link>
          </div>
        </nav>
      )
    }

    export default function App() {
      return (
        <div>
          <Nav />
          <Routes>
            <Route path="/" element={<Home />} />
            <Route path="/about" element={<About />} />
            <Route path="/menu" element={<Menu />} />
            <Route path="/reservations" element={<Reservations />} />
            <Route path="/contact" element={<Contact />} />
          </Routes>
          <footer className="container py-6 text-center text-sm text-gray-400">
            ¬© {new Date().getFullYear()} Carter's Flamehouse
          </footer>
        </div>
      )
    }
    """),
    "src/pages/Home.jsx": textwrap.dedent("""\
    import React from 'react'

    export default function Home() {
      return (
        <div className="container py-8">
          <h2 className="header-title mb-4">Where Fire Meets Fine Dining</h2>
          <p className="mb-6">
            Welcome to Carter&apos;s Flamehouse ‚Äî upscale BBQ with a modern twist.
          </p>
          <div className="flex gap-4">
            <a href="/menu" className="nav-link">View Menu</a>
            <a href="/reservations" className="nav-link">Reserve</a>
          </div>
          <h3 className="mt-8 font-bold">Opening Hours</h3>
          <p>Mon‚ÄìThu 5‚Äì10 ‚Ä¢ Fri‚ÄìSat 5‚Äì11 ‚Ä¢ Sun 4‚Äì9</p>
        </div>
      )
    }
    """),
    "src/pages/About.jsx": textwrap.dedent("""\
    import React from 'react'

    export default function About() {
      return (
        <div className="container py-8">
          <h2 className="header-title mb-4">About Carter&apos;s Flamehouse</h2>
          <p className="mb-4">
            Carter&apos;s Flamehouse blends slow smoke techniques with fine dining presentation. 
            We focus on premium ingredients, signature sauces, and a memorable dining experience.
          </p>
          <ul className="list-disc pl-5 space-y-2">
            <li>Premium meats & sustainable sourcing</li>
            <li>In-house sauces, rubs, and breads</li>
            <li>Curated whiskey and cocktail program</li>
          </ul>
        </div>
      )
    }
    """),
    "src/pages/Menu.jsx": textwrap.dedent("""\
    import React from 'react'

    const sections = {
      Starters: [
        'Charred Bone Marrow & Herb Toast',
        'Flame-Seared Wagyu Bites',
        'Smoked Lobster Mac Mini',
        'Grilled Oysters Rockefeller',
        'Fire-Roasted Stuffed Peppers'
      ],
      Mains: [
        'The Carter Tomahawk (40oz Wagyu)',
        'BBQ Lobster Surf & Turf',
        'Fire-Kissed Ribeye',
        'Charcoal-Smoked Porterhouse',
        '12-Hour Smoked Brisket'
      ],
      Sides: [
        'Truffle-Smoked Mac & Cheese',
        'Charred Brussels with Maple-Bacon Glaze',
        'Garlic-Parmesan Flame Fries',
        'Smoked Sweet Potato Pur√©e'
      ],
      Desserts: [
        'Campfire Bourbon Bread Pudding',
        'Flamehouse Molten Lava Cake',
        'Grilled Peach & Mascarpone Tart'
      ],
      Drinks: [
        'The Ember Old Fashioned',
        "Carter's Smoked Manhattan",
        'The Charred Lemon Drop',
        'Midnight Ember Espresso Martini'
      ]
    }

    export default function Menu() {
      return (
        <div className="container py-8">
          <h2 className="header-title mb-6">Menu</h2>
          {Object.entries(sections).map(([section, items]) => (
            <div key={section} className="mb-6">
              <h3 className="text-xl font-semibold mb-2">{section}</h3>
              <ul className="space-y-1">
                {items.map((item, i) => (
                  <li key={i} className="card">{item}</li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      )
    }
    """),
    "src/pages/Reservations.jsx": textwrap.dedent("""\
    import React, { useState } from 'react'

    export default function Reservations() {
      const [sent, setSent] = useState(false)

      function onSubmit(e) {
        e.preventDefault()
        const form = new FormData(e.target)
        const name = form.get('name')
        const email = form.get('email')
        const date = form.get('date')
        const time = form.get('time')
        const party = form.get('party')

        const subject = encodeURIComponent('Reservation Request from ' + name)
        const body = encodeURIComponent(
          `Name: ${name}\\nEmail: ${email}\\nDate: ${date}\\nTime: ${time}\\nParty: ${party}`
        )

        window.location.href = `mailto:hello@flamehousebbq.com?subject=${subject}&body=${body}`
        setSent(true)
      }

      return (
        <div className="container py-8">
          <h2 className="header-title mb-4">Reservations</h2>
          {!sent ? (
            <form onSubmit={onSubmit} className="space-y-4 max-w-md">
              <input className="card w-full" name="name" placeholder="Name" required />
              <input className="card w-full" type="email" name="email" placeholder="Email" required />
              <input className="card w-full" type="date" name="date" required />
              <input className="card w-full" type="time" name="time" required />
              <input className="card w-full" type="number" name="party" placeholder="Party Size" required />
              <button className="nav-link" type="submit">Request Reservation</button>
            </form>
          ) : (
            <p>Mail app opened ‚Äî follow instructions to send reservation.</p>
          )}
        </div>
      )
    }
    """),
    "src/pages/Contact.jsx": textwrap.dedent("""\
    import React from 'react'

    export default function Contact() {
      return (
        <div className="container py-8">
          <h2 className="header-title mb-4">Contact</h2>
          <p>üìû Phone: (555) 123-FLAME</p>
          <p>üìß Email: hello@flamehousebbq.com</p>
          <p>üìç Address: 123 Ember Lane, Your City, ST</p>
          <p>‚è∞ Hours: Mon‚ÄìThu 5‚Äì10 ‚Ä¢ Fri‚ÄìSat 5‚Äì11 ‚Ä¢ Sun 4‚Äì9</p>
        </div>
      )
    }
    """)
}

# Write files
for path, content in files.items():
    full_path = os.path.join(project_root, path)
    os.makedirs(os.path.dirname(full_path), exist_ok=True)
    with open(full_path, "w") as f:
        f.write(content)

# Instead of actually running npm install & build (not possible here), just zip source
zip_path = "/mnt/data/flamehousebbq_source.zip"
shutil.make_archive(zip_path.replace(".zip", ""), 'zip', project_root)

zip_path
